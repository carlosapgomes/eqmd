{% comment %}
PhotoSeries Action Buttons Template
Action buttons for each photo in PhotoSeries (zoom in, zoom out, original size, full page, download)
{% endcomment %}

<div class="photo-action-buttons d-flex gap-2">
    <!-- Zoom In Button -->
    <button type="button" 
            class="btn btn-sm btn-outline-primary photo-zoom-in" 
            title="Ampliar"
            data-photo-id="{{ photo.id }}">
        <i class="bi bi-zoom-in"></i>
    </button>

    <!-- Zoom Out Button -->
    <button type="button" 
            class="btn btn-sm btn-outline-primary photo-zoom-out" 
            title="Reduzir"
            data-photo-id="{{ photo.id }}">
        <i class="bi bi-zoom-out"></i>
    </button>

    <!-- Original Size Button -->
    <button type="button" 
            class="btn btn-sm btn-outline-primary photo-original-size" 
            title="Tamanho Original"
            data-photo-id="{{ photo.id }}">
        <i class="bi bi-aspect-ratio"></i>
    </button>

    <!-- Full Page Button -->
    <button type="button" 
            class="btn btn-sm btn-outline-primary photo-fullscreen" 
            title="Tela Cheia"
            data-photo-id="{{ photo.id }}">
        <i class="bi bi-arrows-fullscreen"></i>
    </button>

    <!-- Download Button -->
    <a href="{% url 'mediafiles:media_download' photo.id %}" 
       class="btn btn-sm btn-outline-success" 
       title="Download"
       download="{{ photo.original_filename }}">
        <i class="bi bi-download"></i>
    </a>

    {% if can_edit %}
    <!-- Edit Photo Description (if editable) -->
    <button type="button" 
            class="btn btn-sm btn-outline-secondary photo-edit-description" 
            title="Editar Descrição"
            data-photo-id="{{ photo.id }}"
            data-series-id="{{ series.id }}">
        <i class="bi bi-pencil"></i>
    </button>
    {% endif %}

    {% if can_delete %}
    <!-- Remove Photo from Series (if deletable) -->
    <button type="button" 
            class="btn btn-sm btn-outline-danger photo-remove" 
            title="Remover da Série"
            data-photo-id="{{ photo.id }}"
            data-series-id="{{ series.id }}">
        <i class="bi bi-trash"></i>
    </button>
    {% endif %}
</div>

<script>
// Initialize action button handlers
document.addEventListener('DOMContentLoaded', function() {
    // Zoom controls
    document.querySelectorAll('.photo-zoom-in').forEach(btn => {
        btn.addEventListener('click', function() {
            if (typeof PhotoSeries !== 'undefined') {
                PhotoSeries.zoomPhoto(1.2);
            }
        });
    });

    document.querySelectorAll('.photo-zoom-out').forEach(btn => {
        btn.addEventListener('click', function() {
            if (typeof PhotoSeries !== 'undefined') {
                PhotoSeries.zoomPhoto(0.8);
            }
        });
    });

    document.querySelectorAll('.photo-original-size').forEach(btn => {
        btn.addEventListener('click', function() {
            if (typeof PhotoSeries !== 'undefined') {
                PhotoSeries.resetZoom();
            }
        });
    });

    document.querySelectorAll('.photo-fullscreen').forEach(btn => {
        btn.addEventListener('click', function() {
            if (typeof PhotoSeries !== 'undefined') {
                PhotoSeries.toggleFullscreen();
            }
        });
    });

    // Remove photo handler
    document.querySelectorAll('.photo-remove').forEach(btn => {
        btn.addEventListener('click', function() {
            const photoId = this.dataset.photoId;
            const seriesId = this.dataset.seriesId;
            
            if (confirm('Tem certeza que deseja remover esta foto da série?')) {
                if (typeof PhotoSeries !== 'undefined') {
                    PhotoSeries.removePhotoFromSeries(seriesId, photoId);
                }
            }
        });
    });
});
</script>
