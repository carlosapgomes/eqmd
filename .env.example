# EquipeMed Environment Configuration Template
# Copy this file to .env and customize for your environment

# ================================================================================
# DJANGO CORE SETTINGS
# ================================================================================

# SECURITY WARNING: Generate a new secret key for production!
# You can generate one at: https://djecrety.ir/
SECRET_KEY=your-super-secret-key-change-this-in-production

# SECURITY WARNING: Set to False in production!
DEBUG=False

# Add your domain(s) here
ALLOWED_HOSTS=yourdomain.com,www.yourdomain.com,localhost,127.0.0.1

# ================================================================================
# CONTAINER REGISTRY SETTINGS (for registry-based deployment)
# ================================================================================

# Container registry configuration
REGISTRY=ghcr.io
REGISTRY_USER=your-github-username
# REGISTRY_TOKEN=your-github-token  # Uncomment and set for private registries

# Full image name (will be pulled instead of building)
EQMD_IMAGE=ghcr.io/yourorg/eqmd:latest

# User configuration (handled by create_eqmd_user.sh)
EQMD_UID=1001
EQMD_GID=1001

# ================================================================================
# MULTI-DEPLOYMENT CONFIGURATION
# ================================================================================

# Container prefix for unique naming (enables multiple deployments on same machine)
CONTAINER_PREFIX=eqmd

# Host port mapping (each deployment needs unique port)
HOST_PORT=8778

# Development port (automatically set to HOST_PORT + 1)
DEV_PORT=8779

# ================================================================================
# DATABASE SETTINGS
# ================================================================================

# SQLite (default - good for small to medium deployments)
# Uses individual DATABASE_* variables below - no additional config needed for SQLite

# PostgreSQL (recommended for production deployments)
# Uncomment these DATABASE_* variables to use PostgreSQL:
# DATABASE_ENGINE=django.db.backends.postgresql
# DATABASE_NAME=eqmd_db  
# DATABASE_USER=eqmd_user
# DATABASE_PASSWORD=${POSTGRES_PASSWORD}
# DATABASE_HOST=postgres
# DATABASE_PORT=5432

# PostgreSQL Container Configuration (used by Docker container)
POSTGRES_DB=eqmd_db
POSTGRES_USER=eqmd_user
POSTGRES_PASSWORD=your_secure_password_here_at_least_32_chars
POSTGRES_PORT=5432

# MySQL/MariaDB (alternative - uncomment to use)
# DATABASE_ENGINE=django.db.backends.mysql
# DATABASE_NAME=eqmd_prod
# DATABASE_USER=username
# DATABASE_PASSWORD=password
# DATABASE_HOST=mysql
# DATABASE_PORT=3306

# ================================================================================
# HOSPITAL CONFIGURATION
# ================================================================================

# Basic hospital information
HOSPITAL_NAME=Your Hospital Name
HOSPITAL_ADDRESS=123 Medical Center Drive, Your City, State 12345
HOSPITAL_PHONE=+1-555-123-4567
HOSPITAL_EMAIL=info@yourhospital.com

# Brazilian hospital identifiers
HOSPITAL_CNES=1234567
HOSPITAL_CNPJ=12.345.678/0001-90

# Hospital short identifier for PWA customization (optional)
# Used to create hospital-specific PWA short names (e.g., "hgrs" -> "HgrsEqmd")
# HOSPITAL_SHORT_ID=hgrs

# Optional hospital settings
HOSPITAL_WEBSITE=https://www.yourhospital.com
HOSPITAL_LOGO_PATH=static/images/hospital-logo.png

# Enable/disable PDF forms feature
HOSPITAL_PDF_FORMS_ENABLED=true

# ================================================================================
# EMAIL SETTINGS
# ================================================================================

# Email backend (required for django-allauth)
EMAIL_BACKEND=django.core.mail.backends.smtp.EmailBackend

# SMTP Configuration
EMAIL_HOST=smtp.your-provider.com
EMAIL_PORT=587
EMAIL_USE_TLS=True
EMAIL_HOST_USER=noreply@yourhospital.com
EMAIL_HOST_PASSWORD=your-email-password

# Email addresses
DEFAULT_FROM_EMAIL=noreply@yourhospital.com
SERVER_EMAIL=server@yourhospital.com

# Django Site Framework configuration (for django-allauth email templates)
SITE_DOMAIN=yourhospital.com
SITE_NAME=Your Hospital Name

# ================================================================================
# SECURITY SETTINGS
# ================================================================================

# HTTPS settings (uncomment when using SSL)
# SECURE_SSL_REDIRECT=True
# SECURE_PROXY_SSL_HEADER=HTTP_X_FORWARDED_PROTO,https
# SECURE_HSTS_SECONDS=31536000
# SECURE_HSTS_INCLUDE_SUBDOMAINS=True
# SECURE_HSTS_PRELOAD=True

# Session security (set to True in HTTPS environments)
SESSION_COOKIE_SECURE=False
CSRF_COOKIE_SECURE=False
SESSION_COOKIE_HTTPONLY=True
CSRF_COOKIE_HTTPONLY=True

# ================================================================================
# STATIC FILES AND MEDIA
# ================================================================================

# Static files 
# - Container builds to: /app/staticfiles
# - Deployment copies to: /var/www/eqmd_static_${INSTANCE_ID}/
# - Nginx serves from unique directory to avoid conflicts
STATIC_URL=/static/
STATIC_ROOT=/app/staticfiles

# Media files (served by Django with authentication)
MEDIA_URL=/media/
MEDIA_ROOT=/app/media

# ================================================================================
# LOGGING
# ================================================================================

# Log level (DEBUG, INFO, WARNING, ERROR, CRITICAL)
LOG_LEVEL=INFO

# Enable Django logging (set to True for detailed logs)
DJANGO_LOG_LEVEL=INFO

# ================================================================================
# DEVELOPMENT SETTINGS (remove or comment out in production)
# ================================================================================

# Development-only settings (comment out for production)
# DEBUG_TOOLBAR=False
# WEBPACK_DEV_SERVER=False

# ================================================================================
# MATRIX SYNAPSE INTEGRATION
# ================================================================================

# Domain configuration for Matrix integration
EQMD_DOMAIN=yourhospital.com
MATRIX_FQDN=matrix.${EQMD_DOMAIN}
CHAT_FQDN=chat.${EQMD_DOMAIN}
MATRIX_PUBLIC_BASEURL=https://${MATRIX_FQDN}/

# OIDC Provider configuration
OIDC_ISSUER=https://${EQMD_DOMAIN}/o

# Matrix database configuration
MATRIX_DATABASE_PASSWORD=your_secure_matrix_password_at_least_32_chars

# Matrix Synapse OIDC client secret (required for homeserver config generation)
SYNAPSE_OIDC_CLIENT_SECRET=your_synapse_client_secret_here

# Matrix service versions (pin for reproducible deployments)
SYNAPSE_VERSION=v1.99.0
ELEMENT_VERSION=v1.11.58

# Synapse admin API configuration
SYNAPSE_ADMIN_TOKEN=your_synapse_admin_token_here
MATRIX_ADMIN_INTERNAL_URL=http://matrix-synapse:8008
MATRIX_CLIENT_INTERNAL_URL=http://matrix-synapse:8008

# Policy module configuration (comma-separated admin user IDs)
# Use the same OIDC mapping as normal users: @u_<public_id>:${MATRIX_FQDN}
MATRIX_ADMIN_USERS=@u_<public_id>:${MATRIX_FQDN}
MATRIX_BOT_USER_ID=@rzero_bot:${MATRIX_FQDN}

# Bot access token (generated via management command)
MATRIX_BOT_ACCESS_TOKEN=your_matrix_bot_access_token_here

# Global room defaults
MATRIX_GLOBAL_ROOM_NAME=EquipeMed - Todos

# ================================================================================
# OPTIONAL INTEGRATIONS
# ================================================================================

# Sentry error tracking (optional)
# SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id

# Redis cache (optional, for better performance)
# CACHE_URL=redis://localhost:6379/1

# Celery task queue (optional, for background tasks)
# CELERY_BROKER_URL=redis://localhost:6379/0
# CELERY_RESULT_BACKEND=redis://localhost:6379/0

# ================================================================================
# DEPLOYMENT-SPECIFIC SETTINGS
# ================================================================================

# Time zone
TIME_ZONE=America/New_York

# Language code
LANGUAGE_CODE=pt-br

# Allowed file upload size (in bytes)
# FILE_UPLOAD_MAX_MEMORY_SIZE=26214400  # 25MB
# DATA_UPLOAD_MAX_MEMORY_SIZE=26214400  # 25MB

# ================================================================================
# SAMPLE CONFIGURATION EXAMPLES
# ================================================================================

# Example for development:
# DEBUG=True
# ALLOWED_HOSTS=localhost,127.0.0.1
# EMAIL_BACKEND=django.core.mail.backends.console.EmailBackend
# EQMD_IMAGE=eqmd:dev
# CONTAINER_PREFIX=dev
# HOST_PORT=8779

# Example for staging:
# DEBUG=False  
# ALLOWED_HOSTS=staging.yourhospital.com
# EQMD_IMAGE=ghcr.io/yourorg/eqmd:staging
# CONTAINER_PREFIX=staging
# HOST_PORT=8780

# Example for production:
# DEBUG=False
# ALLOWED_HOSTS=yourhospital.com,www.yourhospital.com
# EQMD_IMAGE=ghcr.io/yourorg/eqmd:v1.0.0
# CONTAINER_PREFIX=prod
# HOST_PORT=8778
# SESSION_COOKIE_SECURE=True
# CSRF_COOKIE_SECURE=True

# Example for multi-hospital deployment:
# Hospital A:
# CONTAINER_PREFIX=hospital_a
# HOST_PORT=8778
# HOSPITAL_NAME=Hospital A
# EQMD_IMAGE=ghcr.io/yourorg/eqmd:latest

# Hospital B:
# CONTAINER_PREFIX=hospital_b
# HOST_PORT=8780
# HOSPITAL_NAME=Hospital B  
# EQMD_IMAGE=ghcr.io/yourorg/eqmd:latest
