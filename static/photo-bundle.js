(()=>{"use strict";var e,t={345:()=>{},775:(e,t,i)=>{var s=i(122),r=i(816),a=i.n(r);window.Photo=function(){const e={maxSizeMB:2,maxWidthOrHeight:1920,useWebWorker:!0,initialQuality:.8,mimeType:"image/jpeg"},t=window.MediaFiles?window.MediaFiles.utils:{formatFileSize:e=>{if(0===e)return"0 Bytes";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]},showToast:(e,t="info")=>{console.log(`Toast (${t}): ${e}`)}},i={init:function(){this.cacheDOMElements(),this.setupEventListeners()},cacheDOMElements:function(){this.uploadArea=document.getElementById("uploadArea"),this.fileInput=document.querySelector('input[type="file"][name="image"]'),this.imagePreview=document.getElementById("imagePreview"),this.previewImage=document.getElementById("previewImage"),this.removeImageBtn=document.getElementById("removeImage"),this.uploadProgress=document.getElementById("uploadProgress"),this.progressBar=document.getElementById("progressBar"),this.fileNameEl=document.getElementById("fileName"),this.fileSizeEl=document.getElementById("fileSize"),this.fileTypeEl=document.getElementById("fileType")},setupEventListeners:function(){this.uploadArea&&(this.uploadArea.addEventListener("click",(()=>this.fileInput.click())),this.uploadArea.addEventListener("dragover",this.handleDragOver.bind(this)),this.uploadArea.addEventListener("dragleave",this.handleDragLeave.bind(this)),this.uploadArea.addEventListener("drop",this.handleDrop.bind(this))),this.fileInput&&this.fileInput.addEventListener("change",this.handleFileSelect.bind(this)),this.removeImageBtn&&this.removeImageBtn.addEventListener("click",this.removePreview.bind(this))},handleDragOver:function(e){e.preventDefault(),this.uploadArea.classList.add("dragover")},handleDragLeave:function(e){e.preventDefault(),this.uploadArea.classList.remove("dragover")},handleDrop:function(e){e.preventDefault(),this.uploadArea.classList.remove("dragover");const t=e.dataTransfer.files;t.length>0&&(this.fileInput.files=t,this.handleFileSelect({target:this.fileInput}))},handleFileSelect:async function(i){const r=i.target.files[0];if(r){this.showUploadProgress("Processando imagem...");try{const i=await this.convertHeicToJpeg(r),a=await(0,s.A)(i,e),o=new File([a],i.name.replace(/\.[^/.]+$/,".jpg"),{type:"image/jpeg",lastModified:Date.now()}),n=new DataTransfer;n.items.add(o),this.fileInput.files=n.files,this.displayPreview(o),t.showToast&&t.showToast("Imagem pronta para envio!","success")}catch(e){console.error("Image processing error:",e),t.showToast&&t.showToast(`Erro ao processar imagem: ${e.message}`,"danger"),this.reset()}finally{this.hideUploadProgress()}}},convertHeicToJpeg:async function(e){const t=e.name.toLowerCase();if(t.endsWith(".heic")||t.endsWith(".heif")||"image/heic"===e.type||"image/heif"===e.type){this.showUploadProgress("Convertendo imagem HEIC...");try{const t=await a()({blob:e,toType:"image/jpeg",quality:.9}),i=e.name.replace(/\.(heic|heif)$/i,".jpg");return new File([t],i,{type:"image/jpeg"})}catch(e){throw console.error("HEIC conversion failed:",e),new Error("Falha ao converter imagem HEIC.")}}return e},displayPreview:function(e){const i=URL.createObjectURL(e);this.previewImage&&(this.previewImage.src=i,this.previewImage.onload=()=>URL.revokeObjectURL(this.previewImage.src)),this.fileNameEl&&(this.fileNameEl.textContent=e.name),this.fileSizeEl&&(this.fileSizeEl.textContent=t.formatFileSize(e.size)),this.fileTypeEl&&(this.fileTypeEl.textContent=e.type),this.imagePreview&&(this.imagePreview.style.display="block"),this.uploadArea&&(this.uploadArea.style.display="none")},removePreview:function(){this.reset()},reset:function(){this.fileInput&&(this.fileInput.value=""),this.imagePreview&&(this.imagePreview.style.display="none"),this.uploadArea&&(this.uploadArea.style.display="block"),this.previewImage&&(this.previewImage.src=""),this.hideUploadProgress()},showUploadProgress:function(e="Processando..."){this.uploadProgress&&this.progressBar&&(this.uploadProgress.style.display="block",this.progressBar.style.width="50%",this.progressBar.textContent=e)},hideUploadProgress:function(){this.uploadProgress&&this.progressBar&&(this.uploadProgress.style.display="none",this.progressBar.style.width="0%",this.progressBar.textContent="")}};return{init:function(){document.getElementById("photoForm")&&i.init()}}}()}},i={};function s(e){var r=i[e];if(void 0!==r)return r.exports;var a=i[e]={exports:{}};return t[e].call(a.exports,a,a.exports,s),a.exports}s.m=t,e=[],s.O=(t,i,r,a)=>{if(!i){var o=1/0;for(d=0;d<e.length;d++){for(var[i,r,a]=e[d],n=!0,l=0;l<i.length;l++)(!1&a||o>=a)&&Object.keys(s.O).every((e=>s.O[e](i[l])))?i.splice(l--,1):(n=!1,a<o&&(o=a));if(n){e.splice(d--,1);var h=r();void 0!==h&&(t=h)}}return t}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[i,r,a]},s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},s.d=(e,t)=>{for(var i in t)s.o(t,i)&&!s.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={425:0};s.O.j=t=>0===e[t];var t=(t,i)=>{var r,a,[o,n,l]=i,h=0;if(o.some((t=>0!==e[t]))){for(r in n)s.o(n,r)&&(s.m[r]=n[r]);if(l)var d=l(s)}for(t&&t(i);h<o.length;h++)a=o[h],s.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return s.O(d)},i=self.webpackChunkeqmd=self.webpackChunkeqmd||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))})(),s.O(void 0,[796,447],(()=>s(775)));var r=s.O(void 0,[796,447],(()=>s(345)));r=s.O(r)})();