!function(){"use strict";class e{constructor(e){this.linkedFieldsMap=e,this.init()}init(){if(this.linkedFieldsMap&&0!==Object.keys(this.linkedFieldsMap).length)for(const[e,t]of Object.entries(this.linkedFieldsMap))this.initializeDataSource(e,t)}initializeDataSource(e,t){const i=t.fields,n=t.data,s=Object.keys(i);if(0===s.length)return;const d=s[0],a=i[d],l=document.querySelector(`[name="${d}"]`);l&&(l.dataset.linkedData=JSON.stringify(n),l.dataset.linkedFields=JSON.stringify(i),l.addEventListener("change",(e=>{this.handleFieldChange(e.target,n,i,a)})),this.updateReadonlyStates(i,d),l.value&&this.handleFieldChange(l,n,i,a))}handleFieldChange(e,t,i,n){const s=e.value;if(!s)return void this.clearLinkedFields(i,e.name);const d=t.find((e=>e[n]===s));if(d)for(const[t,n]of Object.entries(i)){if(t===e.name)continue;const i=document.querySelector(`[name="${t}"]`);if(!i)continue;const s=d[n];null!=s&&(i.value=s,i.dispatchEvent(new Event("change",{bubbles:!0})),this.addVisualFeedback(i))}}clearLinkedFields(e,t){for(const i of Object.keys(e)){if(i===t)continue;const e=document.querySelector(`[name="${i}"]`);e&&"true"===e.dataset.linkedReadonly&&(e.value="",this.removeVisualFeedback(e))}}updateReadonlyStates(e,t){for(const i of Object.keys(e)){if(i===t)continue;const e=document.querySelector(`[name="${i}"]`);e&&"true"===e.dataset.linkedReadonly&&(e.setAttribute("readonly",!0),e.classList.add("form-control-plaintext","bg-light"))}}addVisualFeedback(e){e.classList.remove("is-invalid"),e.classList.add("auto-filled"),setTimeout((()=>{e.classList.remove("auto-filled")}),1e3)}removeVisualFeedback(e){e.classList.remove("auto-filled")}}class t{constructor(e){this.genderCheckboxes=e.checkboxes||{},this.genderTextFields=e.text_fields||[],this.init()}init(){0===Object.keys(this.genderCheckboxes).length&&0===this.genderTextFields.length||this.initializeGenderSync()}initializeGenderSync(){Object.values(this.genderCheckboxes).forEach((e=>{const t=document.querySelector(`[name="${e}"]`);t&&"checkbox"===t.type&&t.addEventListener("change",(e=>{this.handleGenderCheckboxChange(e.target)}))})),this.highlightAutoFilledGenderFields()}handleGenderCheckboxChange(e){e.checked&&(Object.values(this.genderCheckboxes).forEach((t=>{if(t!==e.name){const e=document.querySelector(`[name="${t}"]`);e&&(e.checked=!1)}})),this.updateGenderTextFields(e))}updateGenderTextFields(e){const t={male_checkbox:"Masculino",female_checkbox:"Feminino",other_checkbox:"Outro",not_informed_checkbox:"NÃ£o Informado"};let i="";for(const[n,s]of Object.entries(this.genderCheckboxes))if(s===e.name){i=t[n]||"";break}this.genderTextFields.forEach((e=>{const t=document.querySelector(`[name="${e}"]`);t&&(t.value=i,this.addVisualFeedback(t))}))}highlightAutoFilledGenderFields(){[...Object.values(this.genderCheckboxes),...this.genderTextFields].forEach((e=>{const t=document.querySelector(`[name="${e}"]`);t&&(t.checked||t.value)&&(t.classList.add("auto-filled-gender"),setTimeout((()=>{t.classList.remove("auto-filled-gender")}),2e3))}))}addVisualFeedback(e){e.classList.remove("is-invalid"),e.classList.add("auto-filled","auto-filled-gender"),setTimeout((()=>{e.classList.remove("auto-filled","auto-filled-gender")}),1500)}}document.addEventListener("DOMContentLoaded",(function(){const i=document.getElementById("linked-fields-data");if(i)try{const t=JSON.parse(i.textContent);new e(t)}catch(e){console.error("Failed to initialize linked fields:",e)}const n=document.getElementById("gender-fields-data");if(n)try{const e=JSON.parse(n.textContent);new t(e)}catch(e){console.error("Failed to initialize gender fields:",e)}}))}();