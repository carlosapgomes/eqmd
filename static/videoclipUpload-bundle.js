(()=>{var e,o,t,i={265:e=>{function o(e){return Promise.resolve().then((()=>{var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}))}o.keys=()=>[],o.resolve=o,o.id=265,e.exports=o},710:()=>{!function(){"use strict";const e={maxVideoDuration:120,maxVideoSize:52428800,allowedVideoTypes:["video/mp4","video/webm","video/quicktime"],allowedVideoExtensions:[".mp4",".webm",".mov"],previewMaxWidth:800,previewMaxHeight:600},o=window.MediaFiles?window.MediaFiles.utils:{formatFileSize:function(e){if(console.warn("MediaFiles not loaded, using fallback formatFileSize"),0===e)return"0 Bytes";const o=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,o)).toFixed(2))+" "+["Bytes","KB","MB","GB"][o]},getFileExtension:function(e){return console.warn("MediaFiles not loaded, using fallback getFileExtension"),e.slice((e.lastIndexOf(".")-1>>>0)+2).toLowerCase()},showToast:function(e,o="info"){console.warn("MediaFiles not loaded, using fallback showToast"),alert(e)},formatDuration:function(e){return`${Math.floor(e/60)}:${Math.floor(e%60).toString().padStart(2,"0")}`}},t={compressionManager:null,compressionControls:null,compressionEnabled:!1,compressionPreset:"medical-standard",emergencyMode:!1,init:function(){this.setupDragAndDrop(),this.setupFileInputs(),this.setupPreviewControls(),this.initCompression()},setupDragAndDrop:function(){document.querySelectorAll(".video-upload-form, #uploadArea").forEach((e=>{e.addEventListener("dragover",this.handleDragOver.bind(this)),e.addEventListener("dragleave",this.handleDragLeave.bind(this)),e.addEventListener("drop",this.handleDrop.bind(this))}))},setupFileInputs:function(){document.querySelectorAll('input[type="file"][accept*="video"]').forEach((e=>{e.addEventListener("change",this.handleFileSelect.bind(this))}));const e=document.getElementById("uploadArea");e&&e.addEventListener("click",(function(){const o=e.querySelector('input[type="file"]');o&&o.click()}))},setupPreviewControls:function(){const e=document.querySelectorAll("#removeVideo, .video-preview-remove"),o=document.querySelectorAll(".video-preview-change");e.forEach((e=>{e.addEventListener("click",this.removePreview.bind(this))})),o.forEach((e=>{e.addEventListener("click",this.changeVideo.bind(this))}))},handleDragOver:function(e){e.preventDefault(),e.currentTarget.classList.add("dragover")},handleDragLeave:function(e){e.preventDefault(),e.currentTarget.classList.remove("dragover")},handleDrop:function(e){e.preventDefault(),e.currentTarget.classList.remove("dragover");const o=e.dataTransfer.files;if(o.length>0){const t=e.currentTarget.querySelector('input[type="file"]');t&&(t.files=o,this.handleFileSelect({target:t}))}},handleFileSelect:function(e){const o=e.target.files[0];o&&(this.validateVideo(o)?(this.showUploadProgress(),this.compressionManager?this.processVideoWithCompression(o,e.target):this.processVideo(o,e.target)):e.target.value="")},validateVideo:function(t){if(!e.allowedVideoTypes.includes(t.type))return o.showToast("Tipo de arquivo não permitido. Use MP4, WebM ou MOV.","danger"),!1;const i="."+o.getFileExtension(t.name);if(!e.allowedVideoExtensions.includes(i))return o.showToast("Extensão de arquivo não permitida.","danger"),!1;if(t.size>e.maxVideoSize){const t=e.maxVideoSize/1048576;return o.showToast(`Arquivo muito grande. Máximo: ${t}MB`,"danger"),!1}return!0},processVideo:function(t,i){const n=document.createElement("video");n.preload="metadata",n.onloadedmetadata=()=>{if(n.duration>e.maxVideoDuration){const t=o.formatDuration(e.maxVideoDuration);return o.showToast(`Vídeo muito longo. Máximo: ${t}`,"danger"),i.value="",void this.hideUploadProgress()}this.showVideoPreview(URL.createObjectURL(t),t,n.duration),this.hideUploadProgress(),o.showToast("Vídeo carregado com sucesso!","success")},n.onerror=()=>{o.showToast("Erro ao carregar o vídeo.","danger"),i.value="",this.hideUploadProgress()},n.src=URL.createObjectURL(t)},showVideoPreview:function(e,o,t){const i=document.getElementById("videoPreview"),n=document.getElementById("uploadArea");if(!i)return;const r=i.querySelector("#previewVideo");r&&(r.src=e),this.updateVideoMetadata(o,t),i.style.display="block",n&&(n.style.display="none")},updateVideoMetadata:function(e,t){const i={fileName:document.getElementById("fileName"),fileSize:document.getElementById("fileSize"),videoDuration:document.getElementById("videoDuration"),fileType:document.getElementById("fileType")};i.fileName&&(i.fileName.textContent=e.name),i.fileSize&&(i.fileSize.textContent=o.formatFileSize(e.size)),i.videoDuration&&(i.videoDuration.textContent=o.formatDuration(t)),i.fileType&&(i.fileType.textContent=e.type)},removePreview:function(e){e.preventDefault();const o=document.getElementById("videoPreview"),t=document.getElementById("uploadArea"),i=document.querySelector('input[type="file"][accept*="video"]');i&&(i.value=""),o&&(o.style.display="none"),t&&(t.style.display="block"),document.querySelectorAll(".media-error").forEach((e=>e.remove()))},changeVideo:function(e){e.preventDefault();const o=document.querySelector('input[type="file"][accept*="video"]');o&&o.click()},showUploadProgress:function(){const e=document.getElementById("uploadProgress");if(e){e.style.display="block";const o=e.querySelector("#progressBar");if(o){let e=0;const t=setInterval((()=>{e+=20*Math.random(),e>=100&&(e=100,clearInterval(t)),o.style.width=e+"%"}),200)}}},hideUploadProgress:function(){const e=document.getElementById("uploadProgress");e&&(e.style.display="none")},initCompression:function(){if(window.VideoCompressionPhase3)try{this.compressionManager=new VideoCompressionPhase3({enableFeatureFlags:!0,enableMonitoring:!0,enableLazyLoading:!0}),this.compressionManager.init().then((()=>{this.setupCompressionControls()})).catch((e=>{console.warn("Compression not available:",e),this.setupFallbackUpload()}))}catch(e){console.warn("Failed to initialize compression manager:",e),this.setupFallbackUpload()}else console.info("VideoCompressionPhase3 not available, using standard upload"),this.setupFallbackUpload()},setupCompressionControls:function(){const e=document.getElementById("uploadArea");if(e){if("undefined"==typeof CompressionControls)return console.warn("CompressionControls not available, using fallback upload"),void this.setupFallbackUpload();try{const o=document.createElement("div");o.className="compression-controls-container",o.id="compressionControlsContainer",e.parentNode.insertBefore(o,e),this.compressionControls=new CompressionControls(o,{medicalContext:this.getMedicalContext()}),this.setupCompressionEventHandlers(),console.log("Compression controls initialized successfully")}catch(e){console.warn("Failed to setup compression controls:",e),this.setupFallbackUpload()}}},setupCompressionEventHandlers:function(){const e=document.getElementById("compressionControlsContainer");e&&(e.addEventListener("compression:compressionEnabled",(e=>{this.compressionEnabled=!0,this.compressionPreset=e.detail.preset})),e.addEventListener("compression:compressionDisabled",(()=>{this.compressionEnabled=!1})),e.addEventListener("compression:presetSelected",(e=>{this.compressionPreset=e.detail.preset})),e.addEventListener("compression:emergencyBypass",(()=>{this.compressionEnabled=!1,this.emergencyMode=!0})),e.addEventListener("compression:compressionCancelled",(()=>{this.fallbackToDirectUpload()})))},processVideoWithCompression:async function(e,o){if(!this.compressionEnabled||this.emergencyMode)return this.processVideo(e,o);try{const t=await this.compressionManager.checkCompressionAvailability(e,{preset:this.compressionPreset});if(!t.available)return console.warn("Compression not available:",t.reason),this.processVideo(e,o);const i=await this.compressVideoFile(e);i.success?(this.compressionControls.completeCompression(i),this.showVideoPreview(URL.createObjectURL(i.compressedFile),i.compressedFile,i.duration)):(this.compressionControls.handleCompressionError(new Error(i.error)),this.processVideo(e,o))}catch(t){console.error("Compression failed:",t),this.compressionControls&&this.compressionControls.handleCompressionError(t),this.processVideo(e,o)}},compressVideoFile:async function(e){return await this.compressionManager.compressVideo(e,{preset:this.compressionPreset,onProgress:e=>{this.compressionControls&&this.compressionControls.updateProgress(e.stage,e.progress,e.eta)}})},getMedicalContext:function(){const e=document.querySelector("[data-patient-id]"),o=document.querySelector("[data-medical-priority]");return{patientId:e?.dataset.patientId,priority:o?.dataset.medicalPriority||"routine",specialty:o?.dataset.specialty||"general"}},fallbackToDirectUpload:function(){this.compressionEnabled=!1;const e=document.getElementById("compressionControlsContainer");e&&(e.style.display="none")},setupFallbackUpload:function(){console.info("Video compression not available, using standard upload")}};window.VideoClip={init:function(){t.init()},utils:o,upload:t,config:e}}()},986:()=>{}},n={};function r(e){var o=n[e];if(void 0!==o)return o.exports;var t=n[e]={exports:{}};return i[e](t,t.exports,r),t.exports}r.m=i,e=[],r.O=(o,t,i,n)=>{if(!t){var s=1/0;for(c=0;c<e.length;c++){for(var[t,i,n]=e[c],a=!0,l=0;l<t.length;l++)(!1&n||s>=n)&&Object.keys(r.O).every((e=>r.O[e](t[l])))?t.splice(l--,1):(a=!1,n<s&&(s=n));if(a){e.splice(c--,1);var d=i();void 0!==d&&(o=d)}}return o}n=n||0;for(var c=e.length;c>0&&e[c-1][2]>n;c--)e[c]=e[c-1];e[c]=[t,i,n]},r.d=(e,o)=>{for(var t in o)r.o(o,t)&&!r.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:o[t]})},r.f={},r.e=e=>Promise.all(Object.keys(r.f).reduce(((o,t)=>(r.f[t](e,o),o)),[])),r.u=e=>(509===e?"ffmpeg-wasm":e)+"-chunk.js",r.miniCssF=e=>{},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,o)=>Object.prototype.hasOwnProperty.call(e,o),o={},t="eqmd:",r.l=(e,i,n,s)=>{if(o[e])o[e].push(i);else{var a,l;if(void 0!==n)for(var d=document.getElementsByTagName("script"),c=0;c<d.length;c++){var p=d[c];if(p.getAttribute("src")==e||p.getAttribute("data-webpack")==t+n){a=p;break}}a||(l=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,r.nc&&a.setAttribute("nonce",r.nc),a.setAttribute("data-webpack",t+n),a.src=e),o[e]=[i];var u=(t,i)=>{a.onerror=a.onload=null,clearTimeout(m);var n=o[e];if(delete o[e],a.parentNode&&a.parentNode.removeChild(a),n&&n.forEach((e=>e(i))),t)return t(i)},m=setTimeout(u.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=u.bind(null,a.onerror),a.onload=u.bind(null,a.onload),l&&document.head.appendChild(a)}},r.j=965,(()=>{var e;r.g.importScripts&&(e=r.g.location+"");var o=r.g.document;if(!e&&o&&(o.currentScript&&"SCRIPT"===o.currentScript.tagName.toUpperCase()&&(e=o.currentScript.src),!e)){var t=o.getElementsByTagName("script");if(t.length)for(var i=t.length-1;i>-1&&(!e||!/^http(s?):/.test(e));)e=t[i--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),r.p=e})(),(()=>{r.b=document.baseURI||self.location.href;var e={965:0};r.f.j=(o,t)=>{var i=r.o(e,o)?e[o]:void 0;if(0!==i)if(i)t.push(i[2]);else{var n=new Promise(((t,n)=>i=e[o]=[t,n]));t.push(i[2]=n);var s=r.p+r.u(o),a=new Error;r.l(s,(t=>{if(r.o(e,o)&&(0!==(i=e[o])&&(e[o]=void 0),i)){var n=t&&("load"===t.type?"missing":t.type),s=t&&t.target&&t.target.src;a.message="Loading chunk "+o+" failed.\n("+n+": "+s+")",a.name="ChunkLoadError",a.type=n,a.request=s,i[1](a)}}),"chunk-"+o,o)}},r.O.j=o=>0===e[o];var o=(o,t)=>{var i,n,[s,a,l]=t,d=0;if(s.some((o=>0!==e[o]))){for(i in a)r.o(a,i)&&(r.m[i]=a[i]);if(l)var c=l(r)}for(o&&o(t);d<s.length;d++)n=s[d],r.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return r.O(c)},t=self.webpackChunkeqmd=self.webpackChunkeqmd||[];t.forEach(o.bind(null,0)),t.push=o.bind(null,t.push.bind(t))})(),r.O(void 0,[717,28,934],(()=>r(710))),r.O(void 0,[717,28,934],(()=>r(927))),r.O(void 0,[717,28,934],(()=>r(772))),r.O(void 0,[717,28,934],(()=>r(664))),r.O(void 0,[717,28,934],(()=>r(818))),r.O(void 0,[717,28,934],(()=>r(85))),r.O(void 0,[717,28,934],(()=>r(110))),r.O(void 0,[717,28,934],(()=>r(918))),r.O(void 0,[717,28,934],(()=>r(164))),r.O(void 0,[717,28,934],(()=>r(777))),r.O(void 0,[717,28,934],(()=>r(92))),r.O(void 0,[717,28,934],(()=>r(225))),r.O(void 0,[717,28,934],(()=>r(774))),r.O(void 0,[717,28,934],(()=>r(989))),r.O(void 0,[717,28,934],(()=>r(34))),r.O(void 0,[717,28,934],(()=>r(865))),r.O(void 0,[717,28,934],(()=>r(539)));var s=r.O(void 0,[717,28,934],(()=>r(986)));s=r.O(s)})();