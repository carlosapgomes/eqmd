# Task ID: 21
# Title: Create Prescription Forms
# Status: pending
# Dependencies: 16
# Priority: high
# Description: Implement forms for creating and editing prescriptions with formsets
# Details:
Create OutpatientPrescriptionForm extending appropriate Event form. Create PrescriptionItemForm for individual items. Create PrescriptionItemFormSet using inlineformset_factory for handling multiple items. Add JavaScript for dynamic form addition/removal. Include drug template selection widget.

# Test Strategy:
Test form creation and validation, verify formset functionality, test drug template integration, test JavaScript dynamic forms

# Subtasks:
## 1. Create Main Prescription Form [pending]
### Dependencies: None
### Description: Design and implement the main prescription form in Django, including fields for patient details, prescription date, and other relevant metadata.
### Details:
Use Django's forms framework to build a form class representing the prescription model. Ensure proper validation and rendering in templates.

## 2. Create Item Form for Prescription Items [pending]
### Dependencies: 21.1
### Description: Develop a separate form for individual prescription items (e.g., drugs), including fields such as drug name, dosage, quantity, and instructions.
### Details:
Implement a Django form class for prescription items that can be used within formsets to handle multiple items dynamically.

## 3. Implement Formset for Multiple Prescription Items [pending]
### Dependencies: 21.2
### Description: Create a Django formset to manage multiple item forms within a single prescription, allowing users to add or remove items dynamically.
### Details:
Use Django's formset_factory or inline formsets to link item forms to the main prescription form, enabling multiple entries per prescription.

## 4. Add JavaScript for Dynamic Form Handling [pending]
### Dependencies: 21.3
### Description: Integrate JavaScript to enhance the user interface by allowing dynamic addition and removal of prescription item forms within the formset without page reloads.
### Details:
Write JavaScript code to clone form templates, update form indices, and handle client-side validation and UI updates for dynamic forms.

## 5. Integrate Drug Template Selection Widget [pending]
### Dependencies: 21.4
### Description: Add a widget to the item form that allows users to select from predefined drug templates to auto-fill item details, improving usability and accuracy.
### Details:
Develop or integrate a custom widget or autocomplete field in Django forms that fetches drug templates and populates form fields accordingly.

